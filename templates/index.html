{% import "macros/page.html" as page_macros %}
{% import "macros/macros.html" as macros %}
{% extends "base.html" %}
{% block content %}
  <div>
    {% for page in paginator.pages %}
      <article>
        {{ macros::title(page=page) }}
        <p>
          {% if page.summary -%}
            {{ page.summary | markdown(inline=true) | safe }}
          {% elif page.description %}
            {{ page.description | safe }}
          {% elif page.content %}
            {{ page.content | safe | striptags | truncate(length=150) }}
          {% elif page.extra.static_thumbnail %}
          {% endif -%}
          <a href="{{ page.permalink | safe }}">...more</a>
        </p>
      </article>
    {% endfor %}
    {% if paginator.previous or paginator.next %}
    <nav>
      <div>{% if paginator.previous %}<a href="{{ paginator.previous | safe }}">&#60; Previous</a> {% endif %} </div>
      <div>
        <ul>
          {% for pager in range(start=1, end=paginator.number_pagers+1) %}
          <li>
            {% if pager == 1 %}
              <a class="pag {% if paginator.current_index == pager %}cnav{% endif %}" href='{{ get_url(path="/", trailing_slash=true) }}'>
                {{pager}}
              </a>
            {% else %}
              <a class="pag {% if paginator.current_index == pager %}cnav{% endif %}" href='{{ paginator.base_url }}{{pager}}'>
                {{pager}}
              </a>
            {% endif -%}
          </li>
          {% endfor %}
        </ul>
      </div>
      <div>{% if paginator.next %}<a href="{{ paginator.next | safe }}">Next &#62;</a>{% endif %} </div>
    </nav>
    {% endif -%}
  </div>
  {% set section_item = get_section(path="_index.md") %}
  {% if config.extra.recent | default(value=true) %}
    <div class="toc">
      <div class="toc-sticky">
        <h3>Recent Posts</h3>
        {% for page in section_item.pages | slice(end=config.extra.recent_items) %}
          {{ page_macros::page_listing(page=page) }}
        {% endfor %}
      </div>
    </div>
  {% endif %}
{% endblock content %}
